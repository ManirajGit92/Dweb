<p-accordion>
  <p-accordionTab header="Add/Update" [selected]="true">
    <form [formGroup]="usersForm" (ngSubmit)="onSubmit()">
      <div class="grid">
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <div class="flex flex-column gap-2">
            <label for="username">Username</label>
            <input pInputText id="username" aria-describedby="username-help" [formControlName]="'userName'" />
            <small *ngIf="!isFormValid" id="username-help">
              Please Enter Username.
            </small>
          </div>
        </div>
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <div class="flex flex-column gap-2">
            <label for="emailAddress">EmailAddress</label>
            <input pInputText id="emailAddress" aria-describedby="emailAddress-help"
              [formControlName]="'emailAddress'" />
            <small *ngIf="!isFormValid" id="username-help">
              Please Enter EmailAddress.
            </small>
          </div>
        </div>
        <!-- [(ngModel)]="newContent.body" -->
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <div class="flex flex-column gap-2">
            <label for="phoneNumber">PhoneNumber</label>
            <input pInputText id="phoneNumber" aria-describedby="phoneNumber-help" [formControlName]="'phoneNumber'" />
            <small *ngIf="!isFormValid" id="username-help">
              Please Enter PhoneNumber.
            </small>
          </div>
        </div>
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <div class="flex flex-column gap-2">
            <label for="emailOTP">EmailOTP</label>
            <input pInputText id="emailOTP" aria-describedby="emailOTP-help" [formControlName]="'emailOTP'" />
            <small *ngIf="!isFormValid" id="username-help">
              Please Enter emailOTP.
            </small>
          </div>
        </div>
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <div class="flex flex-column gap-2">
            <label for="mobileOTP">MobileOTP</label>
            <input pInputText id="mobileOTP" aria-describedby="mobileOTP-help" [formControlName]="'mobileOTP'" />
            <small *ngIf="!isFormValid" id="username-help">
              Please Enter mobileOTP.
            </small>
          </div>
        </div>
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <div class="flex flex-column gap-2">
            <label for="password">Password</label>
            <input pInputText id="password" aria-describedby="password-help" [formControlName]="'password'" />
            <small *ngIf="!isFormValid" id="username-help">
              Please Enter your password.
            </small>
          </div>
        </div>
        <div class="col-12 lg:col-4 md:col-6 sm:col-12">
          <p-button label="Add" icon="pi pi-check" iconPos="right" [type]="'button'" (click)="addUsers()" />
          <p-button label="Update" icon="pi pi-check" iconPos="right" [type]="'button'" (click)="updateUsers()" />
          <p-button label="Cancel" icon="pi pi-check" iconPos="right" [type]="'button'" (click)="cancelEdit()" />
        </div>
      </div>
    </form>

  </p-accordionTab>
</p-accordion>

<!-- <app-shared-table [tableData]="tableData" [tableConfig]="tableConfig"></app-shared-table> -->

<!-- table -->
<div class="table-container">
  <div class="global-search">
    <span class="p-input-icon-left">
      <i class="pi pi-search"></i>
      <input #globalFilter pInputText type="text" placeholder="Global Search" [(ngModel)]="globalFilter"
        (input)="dt.filterGlobal(globalFilter.value, 'contains')" />
    </span>
  </div>

  <p-table #dt [value]="users" [(selection)]="selectedData" dataKey="id" editMode="row" [scrollable]="true"
    scrollHeight="400px" [resizableColumns]="true" columnResizeMode="fit" [reorderableColumns]="true"
    [globalFilterFields]="['id','name','email','phone','password']" styleClass="p-datatable-gridlines">
    <!-- Frozen Header -->
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 3rem">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th pResizableColumn pReorderableColumn pSortableColumn field="id">ID
          <p-sortIcon field="id"></p-sortIcon>
        </th>
        <th pResizableColumn pReorderableColumn pSortableColumn field="name">UserName
          <p-sortIcon field="userName"></p-sortIcon>
        </th>
        <th pResizableColumn pReorderableColumn pSortableColumn field="email">EmailAddress
          <p-sortIcon field="emailAddress"></p-sortIcon>
        </th>
        <th pResizableColumn pReorderableColumn pSortableColumn field="name">PhoneNumber
          <p-sortIcon field="phoneNumber"></p-sortIcon>
        </th>
        <th pResizableColumn pReorderableColumn pSortableColumn field="email">Password
          <p-sortIcon field="password"></p-sortIcon>
        </th>
        <th style="width: 8rem">Actions</th>
      </tr>
    </ng-template>
    <!-- Table Body -->
    <ng-template pTemplate="body" let-data>
      <tr [pSelectableRow]="data">
        <td>
          <p-tableCheckbox [value]="data"></p-tableCheckbox>
        </td>
        <td>
          {{ data.id }}
        </td>
        <td>
          {{ data.username }}
        </td>
        <td>
          {{ data.emailaddress }}
        </td>
        <td>
          {{ data.phonenumber }}
        </td>
        <td>
          {{ data.password }}
        </td>

        <td>
          <button pButton icon="pi pi-pencil" class="p-button-text p-button-sm" (click)="editUsers(data)"></button>
          <button pButton icon="pi pi-trash" class="p-button-text p-button-sm" (click)="deleteUsers(data.id)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>